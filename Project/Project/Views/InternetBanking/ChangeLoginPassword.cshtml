@{ ViewBag.Title = "Change Login Password";
    Layout = "~/Views/Shared/_Banking.cshtml";
    ViewBag.NavType = "UserLoggedIn";
    ViewBag.Account = Session["Account"];
    }

<h2>Change Login Password</h2>

<div style="display: flex; gap: 40px; margin-top: 20px;">
   
    <div style="flex: 1; border-right: 1px solid #ccc; padding-right: 20px;">
        <h4>Password Update</h4>
        <p>Update your login password securely. Make sure your new password is strong and not easily guessable.</p>
    </div>


    <div style="flex: 2;">
        @using (Html.BeginForm("ChangeLoginPassword", "InternetBanking", FormMethod.Post, new { onsubmit = "return validatePasswordChange();" }))
        {


                <div class="form-group">
                    <label>Old Password:</label>
                    <input type="password" name="oldPassword" class="form-control" required />
                </div>

                                <div class="form-group">
                                    <label>New Password:</label>
                                    <input type="password" name="newPassword" id="newPassword" class="form-control" required oninput="checkStrength(this.value)" />
                                    <small id="passwordStrength" class="form-text text-muted"></small>
                                </div>

                                                <div style="margin-top: 15px;">
                                                    <button type="submit" class="btn btn-primary">Change</button>
                                                    <button type="reset" class="btn btn-secondary">Reset</button>
                                                </div>}

        @if (ViewBag.Message != null)
        {
<div class="alert alert-info mt-3">@ViewBag.Message</div>}
    </div>
</div>

@section scripts {
    <script>
        function checkStrength(password) {
            const strengthText = document.getElementById("passwordStrength");
            if (password.length < 6) {
                strengthText.textContent = "Weak (min 6 characters)";
                strengthText.style.color = "red";
            } else if (password.match(/[A-Z]/) && password.match(/[0-9]/) && password.length >= 8) {
                strengthText.textContent = "Strong";
                strengthText.style.color = "green";
            } else {
                strengthText.textContent = "Medium (add uppercase and numbers)";
                strengthText.style.color = "orange";
            }
        }

        function validatePasswordChange() {
            const newPassword = document.getElementById("newPassword").value;
            if (newPassword.length < 6) {
                alert("New password must be at least 6 characters long.");
                return false;
            }
            return true;
        }
    </script>
}